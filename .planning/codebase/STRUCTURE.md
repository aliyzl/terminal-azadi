# Structure

## Directory Layout

```
vless-terminal/
├── menu.sh                    # Main interactive TUI (18-option menu loop)
├── run.sh                     # Thin proxy runner (starts xray with config)
├── install.sh                 # Downloads Xray-core binary from GitHub
├── setup-azad.sh              # One-time setup (install + shell aliases)
├── link-to-full-config.sh     # VLESS URI → full config.json generator
├── vless-link-to-config.sh    # VLESS URI → outbound JSON printer (standalone)
├── config.template.json       # Template Xray config (placeholder values)
├── config.json                # Generated Xray config (from selected server)
├── xray                       # Xray-core binary (downloaded by install.sh)
├── geoip.dat                  # GeoIP database (bundled with Xray)
├── geosite.dat                # GeoSite database (bundled with Xray)
├── LICENSE                    # MPL-2.0
├── README.md                  # Xray-core upstream README
├── data/                      # Runtime data directory
│   ├── servers.txt            # Server list (name|vless://... per line)
│   ├── subscriptions.txt      # Subscription URL history
│   ├── current.txt            # Index of currently selected server
│   ├── last_sub_url.txt       # Last used subscription URL
│   ├── proxy.pid              # PID file for background xray process
│   └── xray.log               # Xray stdout/stderr when running in background
└── path/to/venv/              # Python venv (appears unused/leftover)
    └── lib/python3.12/site-packages/pip/  # pip only
```

## Key Locations

| What | Path |
|------|------|
| Main entry point | `menu.sh` |
| Config generator | `link-to-full-config.sh` |
| Server storage | `data/servers.txt` |
| Active config | `config.json` |
| Proxy PID | `data/proxy.pid` |
| Xray binary | `xray` |
| Background logs | `data/xray.log` |

## Naming Conventions

- **Scripts** — Kebab-case `.sh` files at project root
- **Data files** — Snake_case `.txt` files in `data/`
- **Functions** — Snake_case bash functions (e.g., `add_vless`, `run_proxy_bg`, `get_host_port`)
- **Variables** — UPPER_CASE for constants/paths (`DIR`, `DATA`, `SERVERS`, `PROXY_PID_FILE`), lower_case for locals
- **Color vars** — Single-letter or short abbreviations (`R`, `B`, `C`, `G`, `Y`, `M`, `RED`)

## File Roles

### Core Scripts (user-facing)
- `menu.sh` — All user interaction; 700+ lines; contains all menu functions inline
- `setup-azad.sh` — Bootstrap script for first-time users

### Support Scripts (called by menu.sh)
- `link-to-full-config.sh` — Called when user selects a server; writes `config.json`
- `run.sh` — Called for foreground proxy; `menu.sh` handles background mode itself
- `install.sh` — Called by quick_connect and menu option 14

### Data Files (runtime state)
- `data/servers.txt` — Primary data store; each line is `name|vless://...`
- `data/current.txt` — Single number indicating selected server index
- `data/proxy.pid` — PID of background xray process
- `data/subscriptions.txt` — Append-only log of subscription URLs
- `data/last_sub_url.txt` — Most recent subscription URL for quick refresh

### Generated/Downloaded
- `config.json` — Generated by `link-to-full-config.sh`; consumed by `xray`
- `xray` — Downloaded binary; not in version control
- `geoip.dat` / `geosite.dat` — Bundled with Xray download
